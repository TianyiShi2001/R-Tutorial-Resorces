---
output: 
  html_document:
    toc: TRUE
    toc_float: TRUE
---

# 小测答案

## 第5章

### 转换年份到世纪。

#### 问题 

**写一个名为`as.century()`的函数，把存储着年份的向量，比如`years <- c(2014, 1990, 1398, 1290, 1880, 2001)`，转换成对应的世纪（注意，19XX年是20世纪）。**

#### 答案 

```{r}
as.century <- function(years) {
  centuries <- floor(years/100+1)
  return(centuries)
}
```

```{r}
years_1 <- c(2014, 1990, 1398, 1290, 1880, 2000)
as.century(years_1)
```

### 斐波那契数列

斐波那契数列是指$F = [1, 1, 2, 3, 5, 8, ...]$，其中：

- $F_1 = 1$，$F_2 = 1$
- 从$F_3$开始，$F_i = F_{i-2} + F_{i-1}$

(也有$F_0=0, F_1=1$的说法，但是为了方便我们不用这个定义)

#### 问题

创建一个函数名为`fibon()`的函数，使得`fibon(i)`：

- 当$i\in \mathbb{Z}^+$时，返回向量$[F_1, F_2, \ldots, F_i]$
- 当$i\notin \mathbb{Z}^+$时，返回`` "请输入一个正整数作为`fibon()`的参数。" ``

提示：

- 虽然在R中整数用`1L`, `2L`等表示，用户在被指示“输入整数”的时候很有可能输入的是`2`而不是`2L`. `2`是否等于`2L`?如果是，如何利用它检测输入的是否是整数？（`2`和`2L`都要被判定为“是整数”）
- 斐波那契数列前两位是定义，从第三位开始才是计算得出的。

#### 答案

首先，因为$F_1 = 1$，$F_2 = 1$是定义，在函数中创建一个向量，名为`F`, 存储前两位元素：

```{r eval=FALSE}
fibon <- function(){
  F <- c(1, 1)
}
```

从$F_3$开始，$F_i = F_{i-2} + F_{i-1}$，翻译成R代码就是：

```{r}
F[i] <- F[i-2] + F[i-1]
```

把它放进while循环里：

```{r}
fibon <- function(len = 10){
  F <- c(1, 1)
  i = 3 # 从3开始
  while (i <= len) { # 到指定的数值结束
    F[i] <- F[i-2] + F[i-1] # 每次增加第i个元素
  }
}
```

最后加入

```{r}
fibon <- function (len = 10) {
  if (len == as.integer(len) & len > 0) { #
    F <- c(1, 1) # 前两项需要定义
    i <- 3 # 从第三项开始计算
    while (i <= len) {
      F[i] <- F[i-2] + F[i-1]
      i <- i+1 # R中不可以使用`i += 1`或者`i++`
    }
    return(F[1:len])
  } else {
    return("请输入一个正整数。")
  }
}
```

```{r}
sapply(c(1, 2, 3, 10, -5, 6.5), fibon)
```